#!/usr/bin/env python
# -*- coding: utf-8 -*-


# =============================================================================
# FUTURE
# =============================================================================

from __future__ import unicode_literals


# =============================================================================
# DOCS
# =============================================================================

"""Database interface for otree launcher

"""


# =============================================================================
# IMPORTS
# =============================================================================

import os
import datetime

from . import cons
from .libs import peewee


# =============================================================================
# CONSTANTS
# =============================================================================

logger = cons.logger


# =============================================================================
# CONSTANTS
# =============================================================================

DB = peewee.SqliteDatabase(cons.DB_PATH, threadlocals=True)


# =============================================================================
# MODELS
# =============================================================================

class BaseModel(peewee.Model):
    class Meta:
        database = DB


class Deploy(BaseModel):

    path = peewee.TextField()
    created_date = peewee.DateTimeField(default=datetime.datetime.now)
    last_update = peewee.DateTimeField(default=datetime.datetime.now)


# =============================================================================
# SETUP
# =============================================================================

DB.connect()

for cls in BaseModel.__subclasses__():
    cls.create_table(fail_silently=True)
del cls


# =============================================================================
# MAIN
# =============================================================================

if __name__ == "__main__":
    print(__doc__)
